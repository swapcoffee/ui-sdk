<template>
	<div class="settings-background"
		 @click.self="$emit('closeSettings')"
	>
		<div class="settings"
			 v-if="!langMode"
		>
			<!--			<div class="settings__content">-->
			<!--				-->
			<!--			</div>-->
			<div class="settings__title">
				<h2 class="settings__heading">{{ $t('dexGlobal.caption') }}</h2>
				<button class="settings__close-btn"
						@click="$emit('closeSettings')"
				>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
						<g opacity="0.8">
							<path d="M19.2807 18.2194C19.3504 18.289 19.4056 18.3718 19.4433 18.4628C19.4811 18.5539 19.5005 18.6514 19.5005 18.75C19.5005 18.8485 19.4811 18.9461 19.4433 19.0372C19.4056 19.1282 19.3504 19.2109 19.2807 19.2806C19.211 19.3503 19.1283 19.4056 19.0372 19.4433C18.9462 19.481 18.8486 19.5004 18.7501 19.5004C18.6515 19.5004 18.5539 19.481 18.4629 19.4433C18.3718 19.4056 18.2891 19.3503 18.2194 19.2806L12.0001 13.0603L5.78068 19.2806C5.63995 19.4213 5.44907 19.5004 5.25005 19.5004C5.05103 19.5004 4.86016 19.4213 4.71943 19.2806C4.5787 19.1399 4.49963 18.949 4.49963 18.75C4.49963 18.551 4.5787 18.3601 4.71943 18.2194L10.9397 12L4.71943 5.78061C4.5787 5.63988 4.49963 5.44901 4.49963 5.24999C4.49963 5.05097 4.5787 4.8601 4.71943 4.71936C4.86016 4.57863 5.05103 4.49957 5.25005 4.49957C5.44907 4.49957 5.63995 4.57863 5.78068 4.71936L12.0001 10.9397L18.2194 4.71936C18.3602 4.57863 18.551 4.49957 18.7501 4.49957C18.9491 4.49957 19.1399 4.57863 19.2807 4.71936C19.4214 4.8601 19.5005 5.05097 19.5005 5.24999C19.5005 5.44901 19.4214 5.63988 19.2807 5.78061L13.0604 12L19.2807 18.2194Z" fill="white"/>
						</g>
					</svg>
				</button>
			</div>
			<div class="theme">
				<div class="theme__info">
					<p class="settings__name">{{ getThemeName }}</p>
					<p class="settings__description">{{ $t('dexGlobal.theme.text') }}</p>
				</div>
				<div class="theme__switch-block">
					<button class="theme__btn"
							:class="{active_theme: theme === 'system'}"
							@click="changeTheme('system')"
					>
						<svg class="theme-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
							 viewBox="0 0 16 16" fill="none">
							<path v-if="theme === 'system'" d="M10 13.5H6C5.86739 13.5 5.74021 13.5527 5.64645 13.6464C5.55268 13.7402 5.5 13.8674 5.5 14C5.5 14.1326 5.55268 14.2598 5.64645 14.3536C5.74021 14.4473 5.86739 14.5 6 14.5H10C10.1326 14.5 10.2598 14.4473 10.3536 14.3536C10.4473 14.2598 10.5 14.1326 10.5 14C10.5 13.8674 10.4473 13.7402 10.3536 13.6464C10.2598 13.5527 10.1326 13.5 10 13.5Z" fill="white"/>
							<path v-if="theme === 'system'" d="M13 2.5H3C2.17157 2.5 1.5 3.17157 1.5 4V11C1.5 11.8284 2.17157 12.5 3 12.5H13C13.8284 12.5 14.5 11.8284 14.5 11V4C14.5 3.17157 13.8284 2.5 13 2.5Z" fill="white"/>
							<path v-else d="M13 2.5H3C2.60218 2.5 2.22064 2.65804 1.93934 2.93934C1.65804 3.22064 1.5 3.60218 1.5 4V11C1.5 11.3978 1.65804 11.7794 1.93934 12.0607C2.22064 12.342 2.60218 12.5 3 12.5H13C13.3978 12.5 13.7794 12.342 14.0607 12.0607C14.342 11.7794 14.5 11.3978 14.5 11V4C14.5 3.60218 14.342 3.22064 14.0607 2.93934C13.7794 2.65804 13.3978 2.5 13 2.5ZM13.5 11C13.5 11.1326 13.4473 11.2598 13.3536 11.3536C13.2598 11.4473 13.1326 11.5 13 11.5H3C2.86739 11.5 2.74021 11.4473 2.64645 11.3536C2.55268 11.2598 2.5 11.1326 2.5 11V4C2.5 3.86739 2.55268 3.74021 2.64645 3.64645C2.74021 3.55268 2.86739 3.5 3 3.5H13C13.1326 3.5 13.2598 3.55268 13.3536 3.64645C13.4473 3.74021 13.5 3.86739 13.5 4V11ZM10.5 14C10.5 14.1326 10.4473 14.2598 10.3536 14.3536C10.2598 14.4473 10.1326 14.5 10 14.5H6C5.86739 14.5 5.74021 14.4473 5.64645 14.3536C5.55268 14.2598 5.5 14.1326 5.5 14C5.5 13.8674 5.55268 13.7402 5.64645 13.6464C5.74021 13.5527 5.86739 13.5 6 13.5H10C10.1326 13.5 10.2598 13.5527 10.3536 13.6464C10.4473 13.7402 10.5 13.8674 10.5 14Z" fill="white"/>
						</svg>
					</button>
					<button class="theme__btn"
							:class="{active_theme: theme === 'dark'}"
							@click="changeTheme('dark')"
					>
						<svg class="theme-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
							<path v-if="theme === 'dark'" d="M14.7213 9.38808C14.3175 10.7062 13.5083 11.8634 12.4088 12.695C11.4434 13.4215 10.2947 13.8646 9.09155 13.9746C7.88837 14.0845 6.67836 13.8569 5.59733 13.3174C4.51631 12.7779 3.60705 11.9477 2.97162 10.9201C2.33619 9.89251 1.99974 8.70815 2.00003 7.49995C1.99569 6.08974 2.45413 4.71704 3.30503 3.59245C4.13662 2.49295 5.2938 1.68373 6.61191 1.27995C6.69878 1.2532 6.7913 1.25064 6.87952 1.27254C6.96774 1.29445 7.04832 1.33998 7.1126 1.40426C7.17687 1.46853 7.22241 1.54912 7.24431 1.63734C7.26622 1.72556 7.26366 1.81808 7.23691 1.90495C6.94868 2.85835 6.92452 3.87207 7.16698 4.83812C7.40945 5.80416 7.90946 6.68633 8.61375 7.39061C9.31803 8.0949 10.2002 8.59491 11.1662 8.83738C12.1323 9.07984 13.146 9.05568 14.0994 8.76745C14.1863 8.7407 14.2788 8.73814 14.367 8.76005C14.4552 8.78195 14.5358 8.82748 14.6001 8.89176C14.6644 8.95604 14.7099 9.03662 14.7318 9.12484C14.7537 9.21306 14.7512 9.30558 14.7244 9.39245L14.7213 9.38808Z" fill="white"/>
							<path v-else d="M14.5963 8.8894C14.5321 8.82513 14.4517 8.77954 14.3636 8.75752C14.2755 8.73549 14.1831 8.73787 14.0963 8.7644C13.1429 9.05263 12.1291 9.07679 11.1631 8.83432C10.1971 8.59186 9.31489 8.09184 8.6106 7.38756C7.90632 6.68327 7.40631 5.80111 7.16384 4.83507C6.92137 3.86902 6.94554 2.85529 7.23376 1.9019C7.26051 1.81503 7.26307 1.72251 7.24117 1.63428C7.21927 1.54606 7.17373 1.46548 7.10946 1.40121C7.04518 1.33693 6.9646 1.29139 6.87638 1.26949C6.78816 1.24759 6.69564 1.25015 6.60876 1.2769C5.29065 1.68068 4.13347 2.4899 3.30189 3.5894C2.57465 4.55494 2.13105 5.70413 2.02093 6.90788C1.91081 8.11163 2.13853 9.32224 2.67852 10.4037C3.2185 11.4852 4.04935 12.3946 5.07772 13.0299C6.10609 13.6652 7.29124 14.0012 8.50001 14C9.91023 14.0044 11.2829 13.5459 12.4075 12.695C13.507 11.8634 14.3162 10.7063 14.72 9.38815C14.7465 9.3016 14.7489 9.2095 14.7271 9.12166C14.7053 9.03383 14.6601 8.95355 14.5963 8.8894ZM11.8063 11.8963C10.7472 12.6939 9.4357 13.0822 8.11311 12.9896C6.79051 12.897 5.54589 12.3297 4.60835 11.3923C3.67081 10.4548 3.10346 9.21023 3.01074 7.88765C2.91803 6.56506 3.30619 5.2535 4.10376 4.1944C4.62339 3.50819 5.29518 2.95193 6.06626 2.5694C6.02234 2.87767 6.0002 3.18865 6.00001 3.50003C6.00183 5.22337 6.68724 6.87562 7.90583 8.09421C9.12442 9.3128 10.7767 9.99821 12.5 10C12.812 9.99993 13.1236 9.97779 13.4325 9.93378C13.0496 10.705 12.4929 11.3768 11.8063 11.8963Z" fill="white"/>
						</svg>
					</button>
					<button class="theme__btn"
							:class="{active_theme: theme === 'light'}"
							@click="changeTheme('light')"
					>
						<svg class="theme-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
							 viewBox="0 0 16 16" fill="none">
							<path v-if="theme === 'light'" d="M7.5 2.5V1C7.5 0.867392 7.55268 0.740215 7.64645 0.646447C7.74021 0.552678 7.86739 0.5 8 0.5C8.13261 0.5 8.25979 0.552678 8.35355 0.646447C8.44732 0.740215 8.5 0.867392 8.5 1V2.5C8.5 2.63261 8.44732 2.75979 8.35355 2.85355C8.25979 2.94732 8.13261 3 8 3C7.86739 3 7.74021 2.94732 7.64645 2.85355C7.55268 2.75979 7.5 2.63261 7.5 2.5ZM8 4C7.20887 4 6.43552 4.2346 5.77772 4.67412C5.11992 5.11365 4.60723 5.73836 4.30448 6.46927C4.00173 7.20017 3.92252 8.00444 4.07686 8.78036C4.2312 9.55628 4.61216 10.269 5.17157 10.8284C5.73098 11.3878 6.44371 11.7688 7.21964 11.9231C7.99556 12.0775 8.79983 11.9983 9.53073 11.6955C10.2616 11.3928 10.8864 10.8801 11.3259 10.2223C11.7654 9.56448 12 8.79113 12 8C11.9988 6.93949 11.577 5.92275 10.8271 5.17285C10.0773 4.42296 9.06051 4.00116 8 4ZM3.64625 4.35375C3.74007 4.44757 3.86732 4.50028 4 4.50028C4.13268 4.50028 4.25993 4.44757 4.35375 4.35375C4.44757 4.25993 4.50028 4.13268 4.50028 4C4.50028 3.86732 4.44757 3.74007 4.35375 3.64625L3.35375 2.64625C3.25993 2.55243 3.13268 2.49972 3 2.49972C2.86732 2.49972 2.74007 2.55243 2.64625 2.64625C2.55243 2.74007 2.49972 2.86732 2.49972 3C2.49972 3.13268 2.55243 3.25993 2.64625 3.35375L3.64625 4.35375ZM3.64625 11.6462L2.64625 12.6462C2.55243 12.7401 2.49972 12.8673 2.49972 13C2.49972 13.1327 2.55243 13.2599 2.64625 13.3538C2.74007 13.4476 2.86732 13.5003 3 13.5003C3.13268 13.5003 3.25993 13.4476 3.35375 13.3538L4.35375 12.3538C4.40021 12.3073 4.43706 12.2521 4.4622 12.1914C4.48734 12.1308 4.50028 12.0657 4.50028 12C4.50028 11.9343 4.48734 11.8692 4.4622 11.8086C4.43706 11.7479 4.40021 11.6927 4.35375 11.6462C4.3073 11.5998 4.25214 11.5629 4.19145 11.5378C4.13075 11.5127 4.0657 11.4997 4 11.4997C3.9343 11.4997 3.86925 11.5127 3.80855 11.5378C3.74786 11.5629 3.69271 11.5998 3.64625 11.6462ZM12 4.5C12.0657 4.50005 12.1307 4.48716 12.1914 4.46207C12.2521 4.43697 12.3073 4.40017 12.3538 4.35375L13.3538 3.35375C13.4476 3.25993 13.5003 3.13268 13.5003 3C13.5003 2.86732 13.4476 2.74007 13.3538 2.64625C13.2599 2.55243 13.1327 2.49972 13 2.49972C12.8673 2.49972 12.7401 2.55243 12.6462 2.64625L11.6462 3.64625C11.5762 3.71618 11.5286 3.8053 11.5092 3.90235C11.4899 3.99939 11.4998 4.09998 11.5377 4.1914C11.5756 4.28281 11.6397 4.36092 11.722 4.41586C11.8043 4.4708 11.9011 4.50008 12 4.5ZM12.3538 11.6462C12.2599 11.5524 12.1327 11.4997 12 11.4997C11.8673 11.4997 11.7401 11.5524 11.6462 11.6462C11.5524 11.7401 11.4997 11.8673 11.4997 12C11.4997 12.1327 11.5524 12.2599 11.6462 12.3538L12.6462 13.3538C12.6927 13.4002 12.7479 13.4371 12.8086 13.4622C12.8692 13.4873 12.9343 13.5003 13 13.5003C13.0657 13.5003 13.1308 13.4873 13.1914 13.4622C13.2521 13.4371 13.3073 13.4002 13.3538 13.3538C13.4002 13.3073 13.4371 13.2521 13.4622 13.1914C13.4873 13.1308 13.5003 13.0657 13.5003 13C13.5003 12.9343 13.4873 12.8692 13.4622 12.8086C13.4371 12.7479 13.4002 12.6927 13.3538 12.6462L12.3538 11.6462ZM3 8C3 7.86739 2.94732 7.74021 2.85355 7.64645C2.75979 7.55268 2.63261 7.5 2.5 7.5H1C0.867392 7.5 0.740215 7.55268 0.646447 7.64645C0.552678 7.74021 0.5 7.86739 0.5 8C0.5 8.13261 0.552678 8.25979 0.646447 8.35355C0.740215 8.44732 0.867392 8.5 1 8.5H2.5C2.63261 8.5 2.75979 8.44732 2.85355 8.35355C2.94732 8.25979 3 8.13261 3 8ZM8 13C7.86739 13 7.74021 13.0527 7.64645 13.1464C7.55268 13.2402 7.5 13.3674 7.5 13.5V15C7.5 15.1326 7.55268 15.2598 7.64645 15.3536C7.74021 15.4473 7.86739 15.5 8 15.5C8.13261 15.5 8.25979 15.4473 8.35355 15.3536C8.44732 15.2598 8.5 15.1326 8.5 15V13.5C8.5 13.3674 8.44732 13.2402 8.35355 13.1464C8.25979 13.0527 8.13261 13 8 13ZM15 7.5H13.5C13.3674 7.5 13.2402 7.55268 13.1464 7.64645C13.0527 7.74021 13 7.86739 13 8C13 8.13261 13.0527 8.25979 13.1464 8.35355C13.2402 8.44732 13.3674 8.5 13.5 8.5H15C15.1326 8.5 15.2598 8.44732 15.3536 8.35355C15.4473 8.25979 15.5 8.13261 15.5 8C15.5 7.86739 15.4473 7.74021 15.3536 7.64645C15.2598 7.55268 15.1326 7.5 15 7.5Z" fill="white"/>
							<path v-else d="M7.5 2.5V1C7.5 0.867392 7.55268 0.740215 7.64645 0.646447C7.74021 0.552678 7.86739 0.5 8 0.5C8.13261 0.5 8.25979 0.552678 8.35355 0.646447C8.44732 0.740215 8.5 0.867392 8.5 1V2.5C8.5 2.63261 8.44732 2.75979 8.35355 2.85355C8.25979 2.94732 8.13261 3 8 3C7.86739 3 7.74021 2.94732 7.64645 2.85355C7.55268 2.75979 7.5 2.63261 7.5 2.5ZM12 8C12 8.79113 11.7654 9.56448 11.3259 10.2223C10.8864 10.8801 10.2616 11.3928 9.53073 11.6955C8.79983 11.9983 7.99556 12.0775 7.21964 11.9231C6.44371 11.7688 5.73098 11.3878 5.17157 10.8284C4.61216 10.269 4.2312 9.55628 4.07686 8.78036C3.92252 8.00444 4.00173 7.20017 4.30448 6.46927C4.60723 5.73836 5.11992 5.11365 5.77772 4.67412C6.43552 4.2346 7.20887 4 8 4C9.06051 4.00116 10.0773 4.42296 10.8271 5.17285C11.577 5.92275 11.9988 6.93949 12 8ZM11 8C11 7.40666 10.8241 6.82664 10.4944 6.33329C10.1648 5.83994 9.69623 5.45542 9.14805 5.22836C8.59987 5.0013 7.99667 4.94189 7.41473 5.05764C6.83279 5.1734 6.29824 5.45912 5.87868 5.87868C5.45912 6.29824 5.1734 6.83279 5.05764 7.41473C4.94189 7.99667 5.0013 8.59987 5.22836 9.14805C5.45542 9.69623 5.83994 10.1648 6.33329 10.4944C6.82664 10.8241 7.40666 11 8 11C8.7954 10.9992 9.55798 10.6828 10.1204 10.1204C10.6828 9.55798 10.9992 8.7954 11 8ZM3.64625 4.35375C3.74007 4.44757 3.86732 4.50028 4 4.50028C4.13268 4.50028 4.25993 4.44757 4.35375 4.35375C4.44757 4.25993 4.50028 4.13268 4.50028 4C4.50028 3.86732 4.44757 3.74007 4.35375 3.64625L3.35375 2.64625C3.25993 2.55243 3.13268 2.49972 3 2.49972C2.86732 2.49972 2.74007 2.55243 2.64625 2.64625C2.55243 2.74007 2.49972 2.86732 2.49972 3C2.49972 3.13268 2.55243 3.25993 2.64625 3.35375L3.64625 4.35375ZM3.64625 11.6462L2.64625 12.6462C2.55243 12.7401 2.49972 12.8673 2.49972 13C2.49972 13.1327 2.55243 13.2599 2.64625 13.3538C2.74007 13.4476 2.86732 13.5003 3 13.5003C3.13268 13.5003 3.25993 13.4476 3.35375 13.3538L4.35375 12.3538C4.40021 12.3073 4.43706 12.2521 4.4622 12.1914C4.48734 12.1308 4.50028 12.0657 4.50028 12C4.50028 11.9343 4.48734 11.8692 4.4622 11.8086C4.43706 11.7479 4.40021 11.6927 4.35375 11.6462C4.3073 11.5998 4.25214 11.5629 4.19145 11.5378C4.13075 11.5127 4.0657 11.4997 4 11.4997C3.9343 11.4997 3.86925 11.5127 3.80855 11.5378C3.74786 11.5629 3.69271 11.5998 3.64625 11.6462ZM12 4.5C12.0657 4.50005 12.1307 4.48716 12.1914 4.46207C12.2521 4.43697 12.3073 4.40017 12.3538 4.35375L13.3538 3.35375C13.4476 3.25993 13.5003 3.13268 13.5003 3C13.5003 2.86732 13.4476 2.74007 13.3538 2.64625C13.2599 2.55243 13.1327 2.49972 13 2.49972C12.8673 2.49972 12.7401 2.55243 12.6462 2.64625L11.6462 3.64625C11.5762 3.71618 11.5286 3.8053 11.5092 3.90235C11.4899 3.99939 11.4998 4.09998 11.5377 4.1914C11.5756 4.28281 11.6397 4.36092 11.722 4.41586C11.8043 4.4708 11.9011 4.50008 12 4.5ZM12.3538 11.6462C12.2599 11.5524 12.1327 11.4997 12 11.4997C11.8673 11.4997 11.7401 11.5524 11.6462 11.6462C11.5524 11.7401 11.4997 11.8673 11.4997 12C11.4997 12.1327 11.5524 12.2599 11.6462 12.3538L12.6462 13.3538C12.6927 13.4002 12.7479 13.4371 12.8086 13.4622C12.8692 13.4873 12.9343 13.5003 13 13.5003C13.0657 13.5003 13.1308 13.4873 13.1914 13.4622C13.2521 13.4371 13.3073 13.4002 13.3538 13.3538C13.4002 13.3073 13.4371 13.2521 13.4622 13.1914C13.4873 13.1308 13.5003 13.0657 13.5003 13C13.5003 12.9343 13.4873 12.8692 13.4622 12.8086C13.4371 12.7479 13.4002 12.6927 13.3538 12.6462L12.3538 11.6462ZM3 8C3 7.86739 2.94732 7.74021 2.85355 7.64645C2.75979 7.55268 2.63261 7.5 2.5 7.5H1C0.867392 7.5 0.740215 7.55268 0.646447 7.64645C0.552678 7.74021 0.5 7.86739 0.5 8C0.5 8.13261 0.552678 8.25979 0.646447 8.35355C0.740215 8.44732 0.867392 8.5 1 8.5H2.5C2.63261 8.5 2.75979 8.44732 2.85355 8.35355C2.94732 8.25979 3 8.13261 3 8ZM8 13C7.86739 13 7.74021 13.0527 7.64645 13.1464C7.55268 13.2402 7.5 13.3674 7.5 13.5V15C7.5 15.1326 7.55268 15.2598 7.64645 15.3536C7.74021 15.4473 7.86739 15.5 8 15.5C8.13261 15.5 8.25979 15.4473 8.35355 15.3536C8.44732 15.2598 8.5 15.1326 8.5 15V13.5C8.5 13.3674 8.44732 13.2402 8.35355 13.1464C8.25979 13.0527 8.13261 13 8 13ZM15 7.5H13.5C13.3674 7.5 13.2402 7.55268 13.1464 7.64645C13.0527 7.74021 13 7.86739 13 8C13 8.13261 13.0527 8.25979 13.1464 8.35355C13.2402 8.44732 13.3674 8.5 13.5 8.5H15C15.1326 8.5 15.2598 8.44732 15.3536 8.35355C15.4473 8.25979 15.5 8.13261 15.5 8C15.5 7.86739 15.4473 7.74021 15.3536 7.64645C15.2598 7.55268 15.1326 7.5 15 7.5Z" fill="white"/>
						</svg>
					</button>
					<button class="theme__btn"
							:class="{active_theme: theme === 'coffee'}"
							@click="changeTheme('coffee')"
					>
						<svg class="theme-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
							 viewBox="0 0 16 16" fill="none">
							<path v-if="theme === 'coffee'" d="M13 5H2C1.86739 5 1.74021 5.05268 1.64645 5.14645C1.55268 5.24021 1.5 5.36739 1.5 5.5V8.5C1.50149 9.35124 1.68354 10.1925 2.03411 10.9682C2.38468 11.7439 2.89581 12.4364 3.53375 13H2C1.86739 13 1.74021 13.0527 1.64645 13.1464C1.55268 13.2402 1.5 13.3674 1.5 13.5C1.5 13.6326 1.55268 13.7598 1.64645 13.8536C1.74021 13.9473 1.86739 14 2 14H13C13.1326 14 13.2598 13.9473 13.3536 13.8536C13.4473 13.7598 13.5 13.6326 13.5 13.5C13.5 13.3674 13.4473 13.2402 13.3536 13.1464C13.2598 13.0527 13.1326 13 13 13H11.4663C12.232 12.3213 12.8127 11.4591 13.1538 10.4944C13.7888 10.4552 14.3851 10.1754 14.821 9.71198C15.2569 9.24852 15.4998 8.63627 15.5 8V7.5C15.5 6.83696 15.2366 6.20107 14.7678 5.73223C14.2989 5.26339 13.663 5 13 5ZM14.5 8C14.4998 8.32349 14.395 8.63824 14.2013 8.8973C14.0075 9.15636 13.7352 9.34585 13.425 9.4375C13.4745 9.12745 13.4996 8.81398 13.5 8.5V6.08625C13.7924 6.18962 14.0455 6.38107 14.2246 6.63425C14.4037 6.88743 14.4999 7.18989 14.5 7.5V8ZM7 3.5V1.5C7 1.36739 7.05268 1.24021 7.14645 1.14645C7.24021 1.05268 7.36739 1 7.5 1C7.63261 1 7.75979 1.05268 7.85355 1.14645C7.94732 1.24021 8 1.36739 8 1.5V3.5C8 3.63261 7.94732 3.75979 7.85355 3.85355C7.75979 3.94732 7.63261 4 7.5 4C7.36739 4 7.24021 3.94732 7.14645 3.85355C7.05268 3.75979 7 3.63261 7 3.5ZM9 3.5V1.5C9 1.36739 9.05268 1.24021 9.14645 1.14645C9.24021 1.05268 9.36739 1 9.5 1C9.63261 1 9.75979 1.05268 9.85355 1.14645C9.94732 1.24021 10 1.36739 10 1.5V3.5C10 3.63261 9.94732 3.75979 9.85355 3.85355C9.75979 3.94732 9.63261 4 9.5 4C9.36739 4 9.24021 3.94732 9.14645 3.85355C9.05268 3.75979 9 3.63261 9 3.5ZM5 3.5V1.5C5 1.36739 5.05268 1.24021 5.14645 1.14645C5.24021 1.05268 5.36739 1 5.5 1C5.63261 1 5.75979 1.05268 5.85355 1.14645C5.94732 1.24021 6 1.36739 6 1.5V3.5C6 3.63261 5.94732 3.75979 5.85355 3.85355C5.75979 3.94732 5.63261 4 5.5 4C5.36739 4 5.24021 3.94732 5.14645 3.85355C5.05268 3.75979 5 3.63261 5 3.5Z" fill="white"/>
							<path v-else d="M5 3.5V1.5C5 1.36739 5.05268 1.24021 5.14645 1.14645C5.24021 1.05268 5.36739 1 5.5 1C5.63261 1 5.75979 1.05268 5.85355 1.14645C5.94732 1.24021 6 1.36739 6 1.5V3.5C6 3.63261 5.94732 3.75979 5.85355 3.85355C5.75979 3.94732 5.63261 4 5.5 4C5.36739 4 5.24021 3.94732 5.14645 3.85355C5.05268 3.75979 5 3.63261 5 3.5ZM7.5 4C7.63261 4 7.75979 3.94732 7.85355 3.85355C7.94732 3.75979 8 3.63261 8 3.5V1.5C8 1.36739 7.94732 1.24021 7.85355 1.14645C7.75979 1.05268 7.63261 1 7.5 1C7.36739 1 7.24021 1.05268 7.14645 1.14645C7.05268 1.24021 7 1.36739 7 1.5V3.5C7 3.63261 7.05268 3.75979 7.14645 3.85355C7.24021 3.94732 7.36739 4 7.5 4ZM9.5 4C9.63261 4 9.75979 3.94732 9.85355 3.85355C9.94732 3.75979 10 3.63261 10 3.5V1.5C10 1.36739 9.94732 1.24021 9.85355 1.14645C9.75979 1.05268 9.63261 1 9.5 1C9.36739 1 9.24021 1.05268 9.14645 1.14645C9.05268 1.24021 9 1.36739 9 1.5V3.5C9 3.63261 9.05268 3.75979 9.14645 3.85355C9.24021 3.94732 9.36739 4 9.5 4ZM15.5 7.5V8C15.4998 8.63597 15.2572 9.24795 14.8217 9.71137C14.3861 10.1748 13.7904 10.4548 13.1556 10.4944C12.8146 11.4591 12.2339 12.3213 11.4681 13H13C13.1326 13 13.2598 13.0527 13.3536 13.1464C13.4473 13.2402 13.5 13.3674 13.5 13.5C13.5 13.6326 13.4473 13.7598 13.3536 13.8536C13.2598 13.9473 13.1326 14 13 14H2C1.86739 14 1.74021 13.9473 1.64645 13.8536C1.55268 13.7598 1.5 13.6326 1.5 13.5C1.5 13.3674 1.55268 13.2402 1.64645 13.1464C1.74021 13.0527 1.86739 13 2 13H3.53375C2.89581 12.4364 2.38468 11.7439 2.03411 10.9682C1.68354 10.1925 1.50149 9.35124 1.5 8.5V5.5C1.5 5.36739 1.55268 5.24021 1.64645 5.14645C1.74021 5.05268 1.86739 5 2 5H13C13.663 5 14.2989 5.26339 14.7678 5.73223C15.2366 6.20107 15.5 6.83696 15.5 7.5ZM12.5 6H2.5V8.5C2.50193 9.4388 2.76723 10.3582 3.26575 11.1537C3.76427 11.9492 4.47599 12.5889 5.32 13H9.68C10.524 12.5889 11.2357 11.9492 11.7343 11.1537C12.2328 10.3582 12.4981 9.4388 12.5 8.5V6ZM14.5 7.5C14.4999 7.18989 14.4037 6.88743 14.2246 6.63425C14.0455 6.38107 13.7924 6.18962 13.5 6.08625V8.5C13.4996 8.81398 13.4745 9.12745 13.425 9.4375C13.7352 9.34585 14.0075 9.15636 14.2013 8.8973C14.395 8.63824 14.4998 8.32349 14.5 8V7.5Z" fill="white"/>
						</svg>
					</button>
				</div>
			</div>
			<div class="lang"
				 @click="langMode = true"
			>
				<div class="lang__info">
					<p class="settings__name">{{ $t('dexGlobal.lang.name') }}</p>
					<p class="settings__description">{{ $t('dexGlobal.lang.text') }}</p>
				</div>
				<svg class="lang__arrow-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
					<path d="M12.7729 9.39792L7.14792 15.0229C7.09565 15.0752 7.03361 15.1166 6.96533 15.1449C6.89704 15.1732 6.82386 15.1878 6.74995 15.1878C6.67604 15.1878 6.60285 15.1732 6.53457 15.1449C6.46628 15.1166 6.40424 15.0752 6.35198 15.0229C6.29972 14.9707 6.25826 14.9086 6.22998 14.8403C6.20169 14.772 6.18713 14.6989 6.18713 14.6249C6.18713 14.551 6.20169 14.4779 6.22998 14.4096C6.25826 14.3413 6.29972 14.2792 6.35198 14.227L11.5797 8.99995L6.35198 3.77292C6.24643 3.66737 6.18713 3.52421 6.18713 3.37495C6.18713 3.22568 6.24643 3.08253 6.35198 2.97698C6.45753 2.87143 6.60068 2.81213 6.74995 2.81213C6.89921 2.81213 7.04237 2.87143 7.14792 2.97698L12.7729 8.60198C12.8252 8.65422 12.8667 8.71626 12.895 8.78454C12.9233 8.85283 12.9379 8.92603 12.9379 8.99995C12.9379 9.07387 12.9233 9.14706 12.895 9.21535C12.8667 9.28364 12.8252 9.34567 12.7729 9.39792Z" fill="white"/>
				</svg>
			</div>
		</div>
		<div class="settings"
			 v-else
		>
			<div class="settings__title">
				<button class="settings__close-btn"
						@click="langMode = false"
				>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
						<path d="M6.96933 12.5307L14.4693 20.0307C14.539 20.1004 14.6217 20.1556 14.7128 20.1933C14.8038 20.2311 14.9014 20.2505 14.9999 20.2505C15.0985 20.2505 15.1961 20.2311 15.2871 20.1933C15.3782 20.1556 15.4609 20.1004 15.5306 20.0307C15.6003 19.961 15.6555 19.8783 15.6932 19.7872C15.731 19.6962 15.7504 19.5986 15.7504 19.5001C15.7504 19.4015 15.731 19.3039 15.6932 19.2129C15.6555 19.1218 15.6003 19.0391 15.5306 18.9694L8.56026 12.0001L15.5306 5.03068C15.6713 4.88995 15.7504 4.69907 15.7504 4.50005C15.7504 4.30103 15.6713 4.11016 15.5306 3.96943C15.3898 3.8287 15.199 3.74963 14.9999 3.74963C14.8009 3.74963 14.6101 3.8287 14.4693 3.96943L6.96933 11.4694C6.89959 11.5391 6.84427 11.6218 6.80653 11.7128C6.76879 11.8039 6.74936 11.9015 6.74936 12.0001C6.74936 12.0986 6.76879 12.1962 6.80653 12.2873C6.84427 12.3783 6.89959 12.461 6.96933 12.5307Z" fill="white"/>
					</svg>
				</button>
				<h2 class="settings__heading">{{ $t('dexGlobal.lang.caption') }}</h2>
				<div class="hidden-block"></div>
			</div>
			<div class="language-list">
				<button class="language-list__btn"
						:class="{active_lang: lang === 'en'}"
						@click="changeLang('en')"
				>
					<strong class="btn-title">English</strong>
					Английский
				</button>
				<button class="language-list__btn"
						:class="{active_lang: lang === 'ru'}"
						@click="changeLang('ru')"
				>
					<strong class="btn-title">Russian</strong>
					Русский
				</button>
			</div>
		</div>
	</div>
</template>

<script lang="ts">
import computedMixins from "@/mixins/computedMixins";
import { useDexStore } from "@/stores/dex";
import { useSettingsStore } from "@/stores/settings";
import { UserSettings } from "@/utils/types";

export default {
  name: "DexGlobalSettings",
  mixins: [computedMixins],
  data() {
    return {
      theme: "dark",
      lang: 'en',
      langMode: false,
    };
  },
  computed: {
    dexStore() {
      return useDexStore();
    },
    settingsStore() {
      return useSettingsStore();
    },
    getThemeName(): string {
      if (this.theme === 'system') {
        return this.$t('dexGlobal.theme.name[0]');
      } else if (this.theme === 'dark') {
        return this.$t('dexGlobal.theme.name[1]');
      } else if (this.theme === 'light') {
        return this.$t('dexGlobal.theme.name[2]');
      } else if (this.theme === 'coffee') {
        return this.$t('dexGlobal.theme.name[3]');
      }
      return '';
    },
    checkSystemTheme(): string {
      const isDarkSystem = window.matchMedia('(prefers-color-scheme: dark)').matches;
      return isDarkSystem ? 'dark' : 'light';
    },
  },
  methods: {
    changeTheme(value: string, withoutStorage?: boolean): void {
      const oldTheme = this.theme;
      this.theme = value;

      if (oldTheme === 'system') {
        this.removeCurrentTheme(this.checkSystemTheme);
      } else {
        this.removeCurrentTheme(oldTheme);
      }

      if (value === 'system') {
        this.setTheme(this.checkSystemTheme);
        this.settingsStore.SET_THEME(this.checkSystemTheme);
      } else {
        this.setTheme(value);
        this.settingsStore.SET_THEME(value);
      }

      if (withoutStorage) {
        return;
      }
      this.saveStorage();
    },
    removeCurrentTheme(theme: string): void {
      document.body.classList.remove(`theme-${theme}`);
    },
    setTheme(theme: string): void {
      document.body.classList.add(`theme-${theme}`);
    },
    checkUserSettings(storage?: { theme: string; lang: string }): void {
      if (storage) {
        this.changeTheme(storage.theme, true);
        this.changeLang(storage.lang, true);
      } else {
        this.setTheme(this.theme);
      }
    },
    async saveStorage(): Promise<void> {
      try {
        let storage: UserSettings = this.settingsStore.GET_USER_SETTINGS || {
          globalSettings: { theme: 'dark', lang: 'en' },
          dexSettings: {
            maxPoolVolatility: -1,
            expertMode: false,
            slippage: 5,
            priceImpact: 10,
            maxIntermediateTokens: 1,
            maxSplits: 4,
            cashback: false,
          },
        };
        storage.globalSettings = {
          theme: this.theme,
          lang: this.lang,
        };

        localStorage.setItem('globalSettings', JSON.stringify(storage.globalSettings));

        if (this.dexStore.GET_PROOF_VERIFICATION) {
          await this.dexApiV2.writeStorage(this.dexStore.GET_DEX_WALLET?.address, this.dexStore.GET_PROOF_VERIFICATION, storage);
        }
      } catch (err) {
        console.error(err);
      }
    },
    changeLang(value: string, withoutStorage?: boolean): void {
      this.lang = value;
      this.setLang(value);

      if (withoutStorage) {
        return;
      }
      this.saveStorage();
    },
    setLang(lang: string): void {
      this.$i18n.locale = lang;
    }
  },
  created() {
    this.checkUserSettings(JSON.parse(localStorage.getItem('globalSettings') as string));
  },
  watch: {
    'settingsStore.GET_USER_SETTINGS': {
      handler() {
        this.checkUserSettings(this.settingsStore.GET_USER_SETTINGS?.globalSettings);
      },
    },
  },
};
</script>



<style scoped>
.settings-background {
	position: fixed;
	z-index: 999;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(10, 7, 6, 0.8);
}

.settings {
	width: 450px;
	z-index: 999;
	background: var(--iface-main-bg);
	border-radius: 20px;
	padding: 18px;
}

.settings__title {
	margin-bottom: 18px;
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.settings__heading {
	font-size: 24px;
	line-height: 28px;
	font-family: Roboto, sans-serif;
	font-weight: 500;
}

.settings__close-btn {
	width: 24px;
	height: 24px;
	border: none;
	outline: none;
	background: transparent;
}

.theme {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding-bottom: 18px;
	margin-bottom: 18px;
	border-bottom: 1px solid var(--iface-white6);
}

.settings__name {
	margin-bottom: 4px;
	font-family: Roboto, sans-serif;
	font-weight: 500;
	font-size: 14px;
	line-height: 18px;
}

.settings__description {
	font-size: 14px;
	line-height: 18px;
	opacity: 0.8;
}

.theme__switch-block {
	display: flex;
	align-items: center;
	gap: 0 4px;
	padding: 4px;
	border-radius: 12px;
	background: var(--iface-white10);
}

.theme__btn {
	display: flex;
	padding: 6px;
	border: none;
	border-radius: 10px;
	outline: none;
	background: transparent;
}

.active_theme {
	background: #fff;
}

.theme-light svg path {
	fill: #141414;
}

.active_theme svg path {
	fill: #0A84FF
}

.lang {
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.hidden-block {
	width: 24px;
	height: 24px;
}

.language-list {
	display: flex;
	flex-direction: column;
	gap: 6px 0;
}

.language-list__btn {
	display: flex;
	flex-direction: column;
	align-items: center;
	width: 100%;
	padding: 8px;
	border: none;
	border-radius: 12px;
	background: var(--iface-white4);
	font-family: Roboto, sans-serif;
	font-weight: 500;
	font-size: 11px;
}


.btn-title {
	margin-bottom: 4px;
	font-family: Roboto, sans-serif;
	font-weight: 500;
	font-size: 14px;
}

.active_lang {
	background: var(--iface-white10);
}

@media screen and (max-width: 640px) {
	.settings {
		overflow-y: auto;
		position: fixed;
		z-index: 999;
		top: 0;
		bottom: 0;
		right: 0;
		left: 0;
		width: 100%;
		border-radius: 0;
		max-height: 100%;
		display: flex;
		flex-direction: column;
		padding-top: 30px;
	}

	.settings__title {
		margin-bottom: 30px;
	}
}

</style>